<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.earlybud.model.Message">
  	<resultMap type="Message" id="MessageMap"><!-- dto mapping -->
  		<result property="message_code" column="MESSAGE_CODE"/>
  		<result property="item_code" column="ITEM_CODE"/>
  		<result property="receiver" column="RECEIVER"/>
  		<result property="sender" column="SENDER"/>
  		<result property="content" column="CONTENT"/>
  		<result property="send_date" column="SEND_DATE"/>
  		<result property="read_check" column="READ_CHECK"/>
  	</resultMap>
  	
  	<select id="listMessage" resultType="Message" parameterType="String">
  	select * from message where receiver = #{email}
  	</select>
  	
  	<select id="listSentMessage" resultType="Message" parameterType="String">
  	select * from message where sender = #{email}
  	</select>
  	
  	<insert id="sendMessage" parameterType="Message">
  	insert into message(message_code,item_code,receiver,sender,content,send_date,read_check) 
  	values(MESSAGE_CODE_SEQ.nextval,#{item_code},#{receiver},#{sender},#{content},sysdate,0) 
  	</insert>
  	
  	<delete id="deleteMessage" parameterType="String">
  	delete from message where email = #{email}
  	</delete>
  	
  </mapper>